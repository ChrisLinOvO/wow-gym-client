{"ast":null,"code":"var _jsxFileName = \"/Users/Chris/Project-traning/project-wow-fit-fronted/src/component/ServiceRecordDetail/NewServiceRecordDetail.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { FiFileText } from \"react-icons/fi\";\nimport { AiOutlineCloseSquare } from \"react-icons/ai\";\nimport \"./NewServiceRecordDetail.scss\";\nimport Swal from 'sweetalert2';\n\nconst ServiceRecordDetail = props => {\n  // console.log(props);\n  const [replyData, setReplyData] = useState([]);\n  const [showAlert, setShowAlert] = useState(false); // 點擊後顯示對話欄\n\n  const [userInput, setUserInput] = useState(''); // 設定對話框\n\n  const closeClick = () => {\n    setShowAlert(!showAlert);\n  }; // 取對話資訊\n\n\n  async function getReplyData() {\n    const request = new Request('http://localhost:5000/api/customerRoutes/getreplylist', {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const res = await fetch(request);\n    const data = await res.json();\n    setReplyData(data); // 設定資料\n    // console.log(data);\n  }\n\n  async function dataPost() {\n    if (userInput === '') {\n      Swal.fire(\"請輸入對話!\");\n    } else {\n      const request = new Request('http://localhost:5000/api/customerRoutes/test', {\n        method: 'POST',\n        headers: new Headers({\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }),\n        body: JSON.stringify({\n          complaintid: props.complaintid,\n          responder: props.currentUserData.id,\n          replycontent: userInput\n        })\n      });\n      const res = await fetch(request);\n      await res.json(); // 設定資料\n\n      setUserInput(''); // POST後對話框清空\n    }\n  } // console.log(replyData);\n\n\n  let Data = replyData.filter(item => item.complaintid === props.complaintid);\n  useEffect(() => {\n    getReplyData();\n  }, [userInput]); // 預設\n\n  const showtime = value => {\n    return props.createtime.substr(0, 10).concat(' ').concat(props.createtime.substr(11, 8));\n  };\n\n  const complaintTime = value => {\n    return props.createtime.substr(11, 8);\n  };\n\n  const commentTime = value => {\n    return value.substr(11, 8);\n  }; // console.log('replyData' , replyData);\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"border-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"list-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, props.complaintid), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, props.memberid), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, props.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"complaint-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, props.complainttitle), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"phone-number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, props.phonenumber), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"e-mail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, props.email), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"QA-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"content-btn\",\n    onClick: closeClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FiFileText, {\n    className: \"content-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, showtime(props.createtime))), showAlert ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply-content-body show-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply-content-body-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"close-button\",\n    onClick: closeClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineCloseSquare, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 54\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"history-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, props.memberid === '1' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"history-admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 41\n    }\n  }, \"Admin:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"history-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 41\n    }\n  }, props.complainttextarea, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 45\n    }\n  }, complaintTime(props.createtime)))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"history-member\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 41\n    }\n  }, \"Member:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"history-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 41\n    }\n  }, props.complainttextarea, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 45\n    }\n  }, complaintTime(props.createtime))))), Data.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }, item.responder === '1' ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"history-admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 45\n    }\n  }, \"Admin:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"history-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 45\n    }\n  }, item.replycontent, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 49\n    }\n  }, commentTime(item.replytime)))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"history-member\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 45\n    }\n  }, \"Member:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"history-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 45\n    }\n  }, item.replycontent, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reply-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 49\n    }\n  }, commentTime(item.replytime))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"textarea-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    value: userInput,\n    className: \"textarea-body\",\n    onChange: e => setUserInput(e.target.value),\n    maxlength: \"300\",\n    placeholder: \"\\u8ACB\\u8F38\\u5165..\",\n    onKeyPress: event => {\n      if (event.key === 'Enter') {\n        dataPost();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"testPost-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: userInput === '' ? \"disabled\" : \"\",\n    className: \"submit-btn\",\n    onClick: dataPost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 29\n    }\n  }, \"\\u9001\\u51FA\")))) : '');\n};\n\nexport default ServiceRecordDetail;","map":{"version":3,"sources":["/Users/Chris/Project-traning/project-wow-fit-fronted/src/component/ServiceRecordDetail/NewServiceRecordDetail.jsx"],"names":["React","useState","useEffect","FiFileText","AiOutlineCloseSquare","Swal","ServiceRecordDetail","props","replyData","setReplyData","showAlert","setShowAlert","userInput","setUserInput","closeClick","getReplyData","request","Request","method","headers","Headers","Accept","res","fetch","data","json","dataPost","fire","body","JSON","stringify","complaintid","responder","currentUserData","id","replycontent","Data","filter","item","showtime","value","createtime","substr","concat","complaintTime","commentTime","memberid","name","complainttitle","phonenumber","email","complainttextarea","map","index","replytime","e","target","event","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { FiFileText } from \"react-icons/fi\";\nimport { AiOutlineCloseSquare } from \"react-icons/ai\";\nimport \"./NewServiceRecordDetail.scss\"\nimport Swal from 'sweetalert2'\n\n\n\nconst ServiceRecordDetail = (props) => {\n    // console.log(props);\n\n    const [replyData, setReplyData] = useState([])\n    const [showAlert, setShowAlert] = useState(false)\n    // 點擊後顯示對話欄\n    const [userInput, setUserInput] = useState('')\n    // 設定對話框\n    const closeClick = () => { setShowAlert(!showAlert) }\n\n    // 取對話資訊\n    async function getReplyData() {\n        const request = new Request('http://localhost:5000/api/customerRoutes/getreplylist', {\n            method: 'GET',\n            headers: new Headers({\n                Accept: 'application/json', 'Content-Type': 'application/json',\n            })\n        })\n        const res = await fetch(request)\n        const data = await res.json()\n        setReplyData(data)\n        // 設定資料\n        // console.log(data);\n    }\n\n\n\n    async function dataPost() {\n        if (userInput === '') {\n            Swal.fire(\"請輸入對話!\")\n        } else {\n            const request = new Request('http://localhost:5000/api/customerRoutes/test', {\n                method: 'POST',\n                headers: new Headers({\n                    Accept: 'application/json', 'Content-Type': 'application/json',\n                }),\n                body: JSON.stringify({\n                    complaintid: props.complaintid,\n                    responder: props.currentUserData.id,\n                    replycontent: userInput\n                },\n                )\n            })\n            const res = await fetch(request)\n            await res.json()\n            // 設定資料\n            setUserInput('')\n            // POST後對話框清空\n        }\n    }\n\n\n\n    // console.log(replyData);\n    let Data = replyData.filter(item => item.complaintid === props.complaintid)\n\n    useEffect(() => {\n        getReplyData();\n    }, [userInput])\n    // 預設\n\n    const showtime = (value) => {\n        return props.createtime.substr(0, 10).concat(' ').concat(props.createtime.substr(11, 8))\n    }\n\n    const complaintTime = (value) => {\n        return props.createtime.substr(11, 8)\n    }\n\n    const commentTime = (value) => {\n        return value.substr(11, 8)\n    }\n    // console.log('replyData' , replyData);\n\n\n    return (\n        <>\n            <div className=\"border-button\"></div>\n            <span className=\"list-box\">\n                <div className=\"number\">{props.complaintid}</div>\n                <div className=\"user-id\">{props.memberid}</div>\n                <div className=\"user-name\">{props.name}</div>\n                <div className=\"complaint-title\">{props.complainttitle}</div>\n                <div className=\"phone-number\">{props.phonenumber}</div>\n                <div className=\"e-mail\">{props.email}</div>\n                <div className=\"QA-body\">\n                    <button className=\"content-btn\"\n                        onClick={closeClick}>\n                        <FiFileText className=\"content-icon\" />\n                    </button>\n                </div>\n                <div className=\"create-time\">{showtime(props.createtime)}</div>\n            </span>\n            {showAlert ?\n                <div className=\"reply-content-body show-modal\">\n                    <div className=\"reply-content-body-content\">\n                        <div className=\"button-box\">\n                            <button className=\"close-button\"\n                                onClick={closeClick}><AiOutlineCloseSquare />\n                            </button>\n                        </div>\n                        <div className=\"history-body\" >\n                            <div>\n                                {props.memberid === '1'\n                                    ?\n                                    <>\n                                        <p className=\"history-admin\">Admin:</p>\n                                        <div className=\"history-right\">\n                                            {props.complainttextarea}\n                                            <div className=\"reply-time\">\n                                                {complaintTime(props.createtime)}\n                                            </div>\n                                        </div>\n                                    </>\n                                    :\n                                    <>\n                                        <p className=\"history-member\">Member:</p>\n                                        <div className=\"history-left\">{props.complainttextarea}\n                                            <div className=\"reply-time\">{complaintTime(props.createtime)}</div>\n                                        </div>\n                                    </>\n                                }\n                            </div>\n                            {/* <div className=\"history-left\">會員-{props.name}：{props.complainttextarea}</div> */}\n                            {Data.map((item, index) =>\n                                <div >\n                                    {item.responder === '1' ?\n                                        <div>\n                                            <p className=\"history-admin\">Admin:</p>\n                                            <div className=\"history-right\">\n                                                {item.replycontent}\n                                                <div className=\"reply-time\">{commentTime(item.replytime)}</div>\n                                            </div>\n                                        </div>\n\n                                        :\n                                        <div>\n                                            <p className=\"history-member\">Member:</p>\n                                            <div className=\"history-left\">\n                                                {item.replycontent}\n                                                <div className=\"reply-time\">{commentTime(item.replytime)}</div>\n                                            </div>\n                                        </div>\n\n                                    }\n                                </div>\n                            )}\n                        </div>\n                        <div className=\"textarea-box\">\n                            <textarea value={userInput} className=\"textarea-body\"\n                                onChange={e => setUserInput(e.target.value)} maxlength=\"300\" placeholder=\"請輸入..\"\n                                onKeyPress={event => {\n                                    if (event.key === 'Enter') {\n                                        dataPost()\n                                    }\n                                }}>\n                            </textarea>\n                        </div>\n                        <div className=\"testPost-btn\">\n                            <button\n                                disabled={userInput === '' ? \"disabled\" : \"\"}\n                                className=\"submit-btn\"\n                                onClick={dataPost}>送出\n                        </button>\n                        </div>\n                    </div>\n                </div>\n                : ''}\n        </>\n    )\n}\nexport default ServiceRecordDetail;"]},"metadata":{},"sourceType":"module"}