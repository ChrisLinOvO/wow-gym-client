{"ast":null,"code":"import { takeLatest, call, put, all } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { userActionType } from \"./user-action-type\";\nimport { userListSuccess, userListFailure, userSignUpFailer, userLoginSuccess, userLoginFailure, userLogoutFailure, userLogoutSuccess, userSignUpSuccsee } from \"./user-action\";\nexport function* userListAsyncSaga() {\n  try {\n    const {\n      data\n    } = yield axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/user/current-user`, {\n      withCredentials: true\n    });\n    yield put(userListSuccess(data));\n  } catch (err) {\n    yield put(userListFailure(err));\n  }\n}\nexport function* userListStartSaga() {\n  yield takeLatest(userActionType.USER_LIST_START, userListAsyncSaga);\n} // User Sign in\n\nexport function* userLoginAsyncSaga({\n  payload\n}) {\n  try {\n    // console.log(payload);\n    const {\n      data\n    } = yield axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/user/login`, payload, {\n      withCredentials: true\n    }); // console.log(data);\n\n    yield put(userLoginSuccess(data));\n  } catch (err) {\n    yield put(userLoginFailure(err));\n  }\n}\nexport function* userLoginStartSaga() {\n  yield takeLatest(userActionType.USER_LOG_IN_START, userLoginAsyncSaga);\n} // User Sign up\n\nexport function* userSignUpAsyncSaga({\n  payload\n}) {\n  try {\n    console.log(payload);\n    const {\n      data\n    } = yield axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/user/signup`, payload, {\n      withCredentials: true\n    });\n\n    if (data) {\n      yield put(userSignUpSuccsee(data));\n    } else {\n      yield put(userSignUpFailer(\"This email has been used\"));\n    }\n  } catch (err) {\n    yield put(userSignUpFailer(err));\n  }\n}\nexport function* userSignUpStartSaga() {\n  yield takeLatest(userActionType.USER_SIGN_UP_START, userSignUpAsyncSaga);\n} // Sign out\n\nexport function* userSignoutAsyncSaga() {\n  try {\n    yield axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/user/logout`, {\n      withCredentials: true\n    });\n    yield put(userLogoutSuccess());\n  } catch (err) {\n    yield put(userLogoutFailure(err));\n  }\n}\nexport function* userSignoutStartSaga() {\n  yield takeLatest(userActionType.USER_LOG_OUT_START, userSignoutAsyncSaga);\n} // Google log in\n\nexport function* googleLoginAsyncSaga() {\n  try {\n    // console.log(payload);\n    const {\n      data\n    } = yield axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/user/google` // {\n    //   withCredentials: true,\n    // }\n    );\n    console.log(data);\n    yield put(userLoginSuccess(data));\n  } catch (err) {\n    yield put(userLoginFailure(err));\n  }\n}\nexport function* googleLoginStartSaga() {\n  yield takeLatest(userActionType.GOOGLE_LOG_IN_START, googleLoginAsyncSaga);\n}\nexport function* userSaga() {\n  yield all([call(userListStartSaga), call(userSignUpStartSaga), call(userLoginStartSaga), call(userSignoutStartSaga), call(googleLoginStartSaga)]);\n}","map":{"version":3,"sources":["/Users/Chris/Project-traning/project-wow-fit-fronted/src/redux/user/user-saga.js"],"names":["takeLatest","call","put","all","axios","userActionType","userListSuccess","userListFailure","userSignUpFailer","userLoginSuccess","userLoginFailure","userLogoutFailure","userLogoutSuccess","userSignUpSuccsee","userListAsyncSaga","data","get","process","env","REACT_APP_BACKEND_URL","withCredentials","err","userListStartSaga","USER_LIST_START","userLoginAsyncSaga","payload","post","userLoginStartSaga","USER_LOG_IN_START","userSignUpAsyncSaga","console","log","userSignUpStartSaga","USER_SIGN_UP_START","userSignoutAsyncSaga","userSignoutStartSaga","USER_LOG_OUT_START","googleLoginAsyncSaga","googleLoginStartSaga","GOOGLE_LOG_IN_START","userSaga"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,IAArB,EAA2BC,GAA3B,EAAgCC,GAAhC,QAA2C,oBAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,cAAT,QAA+B,oBAA/B;AACA,SACEC,eADF,EAEEC,eAFF,EAGEC,gBAHF,EAIEC,gBAJF,EAKEC,gBALF,EAMEC,iBANF,EAOEC,iBAPF,EAQEC,iBARF,QASO,eATP;AAWA,OAAO,UAAUC,iBAAV,GAA8B;AACnC,MAAI;AACF,UAAM;AACJC,MAAAA;AADI,QAEF,MAAMX,KAAK,CAACY,GAAN,CACP,GAAEC,OAAO,CAACC,GAAR,CAAYC,qBAAsB,wBAD7B,EAER;AAAEC,MAAAA,eAAe,EAAE;AAAnB,KAFQ,CAFV;AAMA,UAAMlB,GAAG,CAACI,eAAe,CAACS,IAAD,CAAhB,CAAT;AACD,GARD,CAQE,OAAOM,GAAP,EAAY;AACZ,UAAMnB,GAAG,CAACK,eAAe,CAACc,GAAD,CAAhB,CAAT;AACD;AACF;AAED,OAAO,UAAUC,iBAAV,GAA8B;AACnC,QAAMtB,UAAU,CAACK,cAAc,CAACkB,eAAhB,EAAiCT,iBAAjC,CAAhB;AACD,C,CAED;;AACA,OAAO,UAAUU,kBAAV,CAA6B;AAAEC,EAAAA;AAAF,CAA7B,EAA0C;AAC/C,MAAI;AACF;AACA,UAAM;AACJV,MAAAA;AADI,QAEF,MAAMX,KAAK,CAACsB,IAAN,CACP,GAAET,OAAO,CAACC,GAAR,CAAYC,qBAAsB,iBAD7B,EAERM,OAFQ,EAGR;AAAEL,MAAAA,eAAe,EAAE;AAAnB,KAHQ,CAFV,CAFE,CASF;;AACA,UAAMlB,GAAG,CAACO,gBAAgB,CAACM,IAAD,CAAjB,CAAT;AACD,GAXD,CAWE,OAAOM,GAAP,EAAY;AACZ,UAAMnB,GAAG,CAACQ,gBAAgB,CAACW,GAAD,CAAjB,CAAT;AACD;AACF;AAED,OAAO,UAAUM,kBAAV,GAA+B;AACpC,QAAM3B,UAAU,CAACK,cAAc,CAACuB,iBAAhB,EAAmCJ,kBAAnC,CAAhB;AACD,C,CAED;;AACA,OAAO,UAAUK,mBAAV,CAA8B;AAAEJ,EAAAA;AAAF,CAA9B,EAA2C;AAChD,MAAI;AACFK,IAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ;AACA,UAAM;AACJV,MAAAA;AADI,QAEF,MAAMX,KAAK,CAACsB,IAAN,CACP,GAAET,OAAO,CAACC,GAAR,CAAYC,qBAAsB,kBAD7B,EAERM,OAFQ,EAGR;AAAEL,MAAAA,eAAe,EAAE;AAAnB,KAHQ,CAFV;;AAOA,QAAIL,IAAJ,EAAU;AACR,YAAMb,GAAG,CAACW,iBAAiB,CAACE,IAAD,CAAlB,CAAT;AACD,KAFD,MAEO;AACL,YAAMb,GAAG,CAACM,gBAAgB,CAAC,0BAAD,CAAjB,CAAT;AACD;AACF,GAdD,CAcE,OAAOa,GAAP,EAAY;AACZ,UAAMnB,GAAG,CAACM,gBAAgB,CAACa,GAAD,CAAjB,CAAT;AACD;AACF;AAED,OAAO,UAAUW,mBAAV,GAAgC;AACrC,QAAMhC,UAAU,CAACK,cAAc,CAAC4B,kBAAhB,EAAoCJ,mBAApC,CAAhB;AACD,C,CAED;;AACA,OAAO,UAAUK,oBAAV,GAAiC;AACtC,MAAI;AACF,UAAM9B,KAAK,CAACY,GAAN,CAAW,GAAEC,OAAO,CAACC,GAAR,CAAYC,qBAAsB,kBAA/C,EAAkE;AACtEC,MAAAA,eAAe,EAAE;AADqD,KAAlE,CAAN;AAGA,UAAMlB,GAAG,CAACU,iBAAiB,EAAlB,CAAT;AACD,GALD,CAKE,OAAOS,GAAP,EAAY;AACZ,UAAMnB,GAAG,CAACS,iBAAiB,CAACU,GAAD,CAAlB,CAAT;AACD;AACF;AAED,OAAO,UAAUc,oBAAV,GAAiC;AACtC,QAAMnC,UAAU,CAACK,cAAc,CAAC+B,kBAAhB,EAAoCF,oBAApC,CAAhB;AACD,C,CAED;;AACA,OAAO,UAAUG,oBAAV,GAAiC;AACtC,MAAI;AACF;AACA,UAAM;AAAEtB,MAAAA;AAAF,QAAW,MAAMX,KAAK,CAACY,GAAN,CACpB,GAAEC,OAAO,CAACC,GAAR,CAAYC,qBAAsB,kBADhB,CAErB;AACA;AACA;AAJqB,KAAvB;AAMAW,IAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ;AACA,UAAMb,GAAG,CAACO,gBAAgB,CAACM,IAAD,CAAjB,CAAT;AACD,GAVD,CAUE,OAAOM,GAAP,EAAY;AACZ,UAAMnB,GAAG,CAACQ,gBAAgB,CAACW,GAAD,CAAjB,CAAT;AACD;AACF;AAED,OAAO,UAAUiB,oBAAV,GAAiC;AACtC,QAAMtC,UAAU,CAACK,cAAc,CAACkC,mBAAhB,EAAqCF,oBAArC,CAAhB;AACD;AAED,OAAO,UAAUG,QAAV,GAAqB;AAC1B,QAAMrC,GAAG,CAAC,CACRF,IAAI,CAACqB,iBAAD,CADI,EAERrB,IAAI,CAAC+B,mBAAD,CAFI,EAGR/B,IAAI,CAAC0B,kBAAD,CAHI,EAIR1B,IAAI,CAACkC,oBAAD,CAJI,EAKRlC,IAAI,CAACqC,oBAAD,CALI,CAAD,CAAT;AAOD","sourcesContent":["import { takeLatest, call, put, all } from \"redux-saga/effects\";\nimport axios from \"axios\";\n\nimport { userActionType } from \"./user-action-type\";\nimport {\n  userListSuccess,\n  userListFailure,\n  userSignUpFailer,\n  userLoginSuccess,\n  userLoginFailure,\n  userLogoutFailure,\n  userLogoutSuccess,\n  userSignUpSuccsee,\n} from \"./user-action\";\n\nexport function* userListAsyncSaga() {\n  try {\n    const {\n      data,\n    } = yield axios.get(\n      `${process.env.REACT_APP_BACKEND_URL}/api/user/current-user`,\n      { withCredentials: true }\n    );\n    yield put(userListSuccess(data));\n  } catch (err) {\n    yield put(userListFailure(err));\n  }\n}\n\nexport function* userListStartSaga() {\n  yield takeLatest(userActionType.USER_LIST_START, userListAsyncSaga);\n}\n\n// User Sign in\nexport function* userLoginAsyncSaga({ payload }) {\n  try {\n    // console.log(payload);\n    const {\n      data,\n    } = yield axios.post(\n      `${process.env.REACT_APP_BACKEND_URL}/api/user/login`,\n      payload,\n      { withCredentials: true }\n    );\n    // console.log(data);\n    yield put(userLoginSuccess(data));\n  } catch (err) {\n    yield put(userLoginFailure(err));\n  }\n}\n\nexport function* userLoginStartSaga() {\n  yield takeLatest(userActionType.USER_LOG_IN_START, userLoginAsyncSaga);\n}\n\n// User Sign up\nexport function* userSignUpAsyncSaga({ payload }) {\n  try {\n    console.log(payload);\n    const {\n      data,\n    } = yield axios.post(\n      `${process.env.REACT_APP_BACKEND_URL}/api/user/signup`,\n      payload,\n      { withCredentials: true }\n    );\n    if (data) {\n      yield put(userSignUpSuccsee(data));\n    } else {\n      yield put(userSignUpFailer(\"This email has been used\"));\n    }\n  } catch (err) {\n    yield put(userSignUpFailer(err));\n  }\n}\n\nexport function* userSignUpStartSaga() {\n  yield takeLatest(userActionType.USER_SIGN_UP_START, userSignUpAsyncSaga);\n}\n\n// Sign out\nexport function* userSignoutAsyncSaga() {\n  try {\n    yield axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/user/logout`, {\n      withCredentials: true,\n    });\n    yield put(userLogoutSuccess());\n  } catch (err) {\n    yield put(userLogoutFailure(err));\n  }\n}\n\nexport function* userSignoutStartSaga() {\n  yield takeLatest(userActionType.USER_LOG_OUT_START, userSignoutAsyncSaga);\n}\n\n// Google log in\nexport function* googleLoginAsyncSaga() {\n  try {\n    // console.log(payload);\n    const { data } = yield axios.get(\n      `${process.env.REACT_APP_BACKEND_URL}/api/user/google`\n      // {\n      //   withCredentials: true,\n      // }\n    );\n    console.log(data);\n    yield put(userLoginSuccess(data));\n  } catch (err) {\n    yield put(userLoginFailure(err));\n  }\n}\n\nexport function* googleLoginStartSaga() {\n  yield takeLatest(userActionType.GOOGLE_LOG_IN_START, googleLoginAsyncSaga);\n}\n\nexport function* userSaga() {\n  yield all([\n    call(userListStartSaga),\n    call(userSignUpStartSaga),\n    call(userLoginStartSaga),\n    call(userSignoutStartSaga),\n    call(googleLoginStartSaga),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}